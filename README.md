# ASBL Basketball Manager (ASBL)

ASBL æ˜¯ä¸€æ¬¾åŸºæ–¼ç¶²é çš„æ–‡å­—ç­–ç•¥ç¶“ç‡ŸéŠæˆ² (Web-based Text Strategy Game)ã€‚çŽ©å®¶æ‰®æ¼”çƒéšŠç¶“ç†ï¼Œåœ¨åš´æ ¼çš„è–ªè³‡é™åˆ¶ä¸‹ï¼Œé€éŽé¸ç§€ã€äº¤æ˜“ã€åŸ¹é¤Šèˆ‡æˆ°è¡“èª¿åº¦ï¼Œæ‰“é€ å±¬æ–¼è‡ªå·±çš„å† è»çŽ‹æœã€‚

æœ¬å°ˆæ¡ˆæŽ¡ç”¨ **Python 3.13 (Flask)** ä½œç‚ºå¾Œç«¯æ¡†æž¶ï¼Œæ­é… **MySQL 9.0** è³‡æ–™åº«é€²è¡Œé–‹ç™¼ï¼Œä¸¦å¼•å…¥ **Polars** èˆ‡ **Parquet** é€²è¡Œå¤§æ•¸æ“šç´šåˆ¥çš„æ•¸å€¼å¹³è¡¡é©—è­‰ã€‚

---

## ðŸ“š éŠæˆ²æ ¸å¿ƒè¦å‰‡ (Game Rules)

### 1. çƒå“¡ç³»çµ± (Player System)

> âš ï¸ **è©³ç´°æŠ€è¡“è¦æ ¼**ï¼šé—œæ–¼çƒå“¡ç”Ÿæˆæ¼”ç®—æ³•ã€å¸¸æ…‹åˆ†ä½ˆåƒæ•¸ã€é–‹éšŠé™£å®¹æª¢æ ¸é‚è¼¯ï¼Œè«‹åƒé–± [ASBL_Player_System_Specification.md](ASBL_Player_System_Specification.md)ã€‚

#### å±¬æ€§ (Attributes) - Spec v2.6
çƒå“¡èƒ½åŠ›å€¼ç¯„åœç‚º **1~99**ï¼Œåˆ†ç‚ºäº”å¤§é¡žï¼š
*   **é‹å‹• (Physical)**: é«”åŠ›ã€åŠ›é‡ã€é€Ÿåº¦ã€å½ˆè·³ã€å¥åº·(éš±è—)ã€‚
*   **æŠ•ç±ƒ (Offense - Shooting)**: æŠ•ç±ƒæº–å¿ƒã€å°„ç¨‹ã€æ‰‹æ„Ÿ(ä¸å¯è¨“)ã€å‡ºæ‰‹é€Ÿåº¦(ä¸å¯è¨“)ã€‚
*   **é€²æ”» (Offense - Skill)**: å‚³çƒã€é‹çƒã€æŽ§çƒã€è·‘ä½ã€‚
*   **é˜²å®ˆ (Defense)**: ç±ƒæ¿ã€å¡ä½ã€å¹²æ“¾ã€æŠ„æˆªã€‚
*   **å¤©è³¦ (Mental)**: é€²æ”»æ™ºå•†ã€é˜²å®ˆæ™ºå•†ã€é‹æ°£(éš±è—)ã€‚(æ°¸ä¸æ”¹è®Š)

#### å¹´é½¡ç”Ÿæˆ (Age Generation)
*   **SSR**: å›ºå®š 18 æ­² (æ¥µå…·åŸ¹é¤Šåƒ¹å€¼)ã€‚
*   **G~SS**: ç­‰ç´šè¶Šä½Žï¼Œåˆå§‹å¹´é½¡æµ®å‹•ç¯„åœè¶Šå¤§ (Gç´šå¯èƒ½é«˜é” 24 æ­²)ã€‚

#### ç¨€æœ‰åº¦åˆ†ç´š (Rarity)
åŸºæ–¼ã€Œä¸å¯è¨“ç·´é …ç›®ã€çš„æ•¸å€¼ç¸½å’Œé€²è¡Œåˆ†ç´šï¼š
*   **SSR**: > 950
*   **SS**: 900 - 950
*   **S**: 800 - 899
*   **A**: 700 - 799
*   **B**: 600 - 699
*   **C**: 400 - 599
*   **G**: < 400

#### æˆé•·èˆ‡é€€åŒ– (Growth & Decline)
*   **æˆé•·æœŸ (18-25æ­²)**: æ¯ä¸Šå ´ 48 åˆ†é˜ç²å¾— 1 è¨“ç·´é»žã€‚
*   **å·”å³°æœŸ (26-29æ­²)**: æ¯ä¸Šå ´ 144 åˆ†é˜ç²å¾— 1 è¨“ç·´é»žã€‚
*   **é€€åŒ–æœŸ (30æ­²+)**: éš¨ä¸Šå ´æ™‚é–“èˆ‡å¹´é½¡å¢žé•·ï¼Œæœ‰æ©ŸçŽ‡æ‰£é™¤èƒ½åŠ›é»žæ•¸ã€‚

---

### 2. è–ªè³‡èˆ‡åˆç´„ (Salary & Contract)

#### è–ªè³‡å¸½ (Salary Cap)
*   **ç¡¬ä¸Šé™**: åœ˜éšŠç¸½è–ªè³‡ä¸å¯è¶…éŽ **100%** (åº•è–ªåˆç´„ä¾‹å¤–)ã€‚
*   **è±ªè¯ç¨…**: è¶…éŽ 100% éœ€æ”¯ä»˜å€çŽ‡ç½°æ¬¾ã€‚
*   **ç°½ç´„é™åˆ¶**: è‹¥è–ªè³‡å·²é” 65%ï¼Œå¿…é ˆå…ˆå®Œæˆé ‚è–ªçºŒç´„ (35%)ï¼Œæ‰å¯ç°½ç½²åº•è–ªåˆç´„ã€‚**å¦å‰‡ä¸€æ—¦è¶…éŽ 65% ç©ºé–“ï¼Œå³ç„¡æ³•å®Œæˆé ‚è–ªçºŒç´„ã€‚**

#### è§’è‰²å®šä½èˆ‡ä¸Šå ´æ™‚é–“ (Role & Minutes)
æ¯”è³½ç¸½æ™‚é–“ 240 åˆ†é˜ã€‚ç³»çµ±æŽ¡ç”¨ **ã€Œä¿åº•æ™‚é–“ + æ¬Šé‡æµ®å‹•ã€** æ¼”ç®—æ³•åˆ†é…æ™‚é–“ã€‚

| è§’è‰²å®šä½ | ä¿åº•æ™‚é–“ (Base) | æ¬Šé‡ç¯„åœ (Weight) | èªªæ˜Ž |
| :--- | :--- | :--- | :--- |
| **æ˜Žæ˜Ÿ (Star)** | **30 min** | **-1 ~ 5** | æ ¸å¿ƒä¸»åŠ›ï¼Œæ¥µå…¶ç©©å®šã€‚ |
| **å…ˆç™¼ (Starter)** | **20 min** | **-2 ~ 7** | ä¸»åŠ›ï¼Œæœ‰æ©Ÿæœƒçˆ†ç™¼ç²å¾—é«˜æ™‚æ•¸ã€‚ |
| **ç¶ è‘‰ (Rotation)** | **10 min** | **5 ~ 15** | è¼ªæ›¿æ ¸å¿ƒï¼Œç«¶çˆ­å‰©é¤˜æ™‚é–“ã€‚ |
| **åŠŸèƒ½ (Role)** | **0 min** | **5 ~ 12** | ç„¡ä¿åº•ï¼Œé ç‹€æ…‹çˆ­å–ä¸Šå ´ã€‚ |
| **æ¿å‡³ (Bench)** | **0 min** | **0 ~ 10** | é‚Šç·£äººï¼Œå¯èƒ½ DNPã€‚ |

---

### 3. æ¯”è³½å¼•æ“Ž (Match Engine) - v1.4

æœ¬ç³»çµ±æŽ¡ç”¨ç´”æ–‡å­—æ¨¡æ“¬å¼•æ“Žï¼Œä¾æ“š **ASBL Spec v1.4** é€²è¡Œé–‹ç™¼ã€‚

#### æ ¸å¿ƒæ©Ÿåˆ¶
*   **é«”åŠ›ç³»çµ± (Stamina)**: 
    *   çƒå“¡èƒ½åŠ›å€¼éš¨é«”åŠ›ä¸‹é™è€Œç·šæ€§è¡°é€€ã€‚
    *   æ¶ˆè€—å…¬å¼ï¼š`3.0 * [1 + (1 - é«”èƒ½%)] + (1 - å¥åº·%)`ã€‚
*   **æ•¸æ“šæ­¸å±¬ (Data Attribution)**:
    *   **éžéš¨æ©Ÿåˆ†é…**ï¼šå¾—åˆ†ã€ç±ƒæ¿ã€åŠ©æ”»ç­‰æ•¸æ“šä¾æ“šçƒå“¡èƒ½åŠ›å€¼ï¼ˆå¦‚èº«é«˜ã€æ™ºå•†ã€é‹çƒï¼‰é€²è¡Œæ¬Šé‡åˆ†é…ã€‚
    *   **æˆ°è¡“åœ°ä½**ï¼šæ˜Žæ˜Ÿçƒå“¡ (Star) æ“æœ‰æ›´é«˜çš„å‡ºæ‰‹æ¬Šé‡ã€‚
    *   **çœŸå¯¦æ€§å„ªåŒ–**ï¼šæŽ§çƒå¾Œè¡›æ›´å®¹æ˜“ç²å¾—åŠ©æ”»ï¼Œä¸­é‹’æ›´å®¹æ˜“ç²å¾—ç±ƒæ¿èˆ‡å°è“‹ã€‚
*   **é—œéµæ™‚åˆ» (Clutch)**: ç¬¬å››ç¯€æœ€å¾Œ 3 åˆ†é˜èˆ‡å»¶é•·è³½å¼·åˆ¶æ›ä¸Šæœ€å¼·é™£å®¹ (Best 5)ã€‚

---

## ðŸ§ª å¤§æ•¸æ“šé©—è­‰æž¶æ§‹ (Big Data Verification)

ç‚ºäº†ç¢ºä¿éŠæˆ²æ•¸å€¼å¹³è¡¡ï¼Œæˆ‘å€‘å»ºç«‹äº†åƒè¬ç´šåˆ¥çš„ ETL æ¸¬è©¦ç®¡ç·šã€‚

*   **æŠ€è¡“æ ¸å¿ƒ**: Python Multiprocessing + Apache Parquet + Polarsã€‚
*   **é©—è­‰è¦æ¨¡**: 100,000,000 (ä¸€å„„) ç­†çƒå“¡è³‡æ–™ç”Ÿæˆé©—æ”¶ã€‚
*   **KPI å ±å‘Š**: è‡ªå‹•åŒ–ç”Ÿæˆ Markdown å ±å‘Šï¼Œè©³è¦‹ `docs/KPI_Validation_Report_v2_6.md`ã€‚
*   **é©—è­‰é …ç›®**:
    *   å¸¸æ…‹åˆ†ä½ˆ (Normal Distribution) æª¢æ ¸ (èº«é«˜ã€é«”é‡)ã€‚
    *   ç¨€æœ‰åº¦ (Rarity) å‡ºç¾æ©ŸçŽ‡æ”¶æ–‚æª¢æ ¸ã€‚
    *   èƒ½åŠ›å€¼é‚Šç•Œ (Stat Caps) èˆ‡é‡éª°æ©Ÿåˆ¶ (Reroll) æœ‰æ•ˆæ€§ã€‚

---

## ðŸ“… é–‹ç™¼æ™‚ç¨‹ (Development Roadmap)

### Phase 1: æ ¸å¿ƒæž¶æ§‹ (Foundation) - [å·²å®Œæˆ]
*   [x] **è³‡æ–™åº«å»ºç½®**: è¨­è¨ˆ User, Team, Player, Contract ç­‰æ ¸å¿ƒ Tableã€‚
*   [x] **çƒå“¡ç”Ÿæˆå¼•æ“Ž**: å¯¦ä½œ 100 æŠ½é‚è¼¯ã€G~SSR åˆ†ç´šæ¼”ç®—æ³•ã€å±¬æ€§éš¨æ©Ÿç”Ÿæˆã€‚
*   [x] **åˆç´„ç³»çµ±**: å¯¦ä½œè§’è‰²å®šä½ã€è–ªè³‡è¨ˆç®—èˆ‡ç°½ç´„é‚è¼¯ã€‚
*   [x] **æ™‚é–“åˆ†é…æ¼”ç®—æ³•**: å¯¦ä½œ `calculate_minutes(roster)` å‡½æ•¸ã€‚
*   [x] **å¤§æ•¸æ“šé©—è­‰**: å®Œæˆ 1 å„„ç­†çƒå“¡ç”Ÿæˆæ¸¬è©¦èˆ‡ KPI é©—æ”¶å ±å‘Šã€‚

### Phase 2: æ¯”è³½èˆ‡æˆé•· (Game Loop) - [é€²è¡Œä¸­]
*   [x] **æ¯”è³½å¼•æ“Ž (v1.4)**: å¯¦ä½œå›žåˆåˆ¶åˆ¤å®šã€é«”åŠ›ç³»çµ±ã€æ•¸æ“šæ­¸å±¬æ©Ÿåˆ¶ã€‚
*   [ ] **æ¯”è³½å¤§æ•¸æ“šæ¸¬è©¦**: é©—è­‰æ¯”è³½æ•¸æ“š (PTS/REB/AST) çš„åˆ†ä½ˆå¹³è¡¡æ€§ã€‚
*   [ ] **æˆé•·ç³»çµ±**: å¯¦ä½œå¹´é½¡æª¢æŸ¥ã€é»žæ•¸è¨ˆç®— (æˆé•·/å·”å³°/é€€åŒ–å…¬å¼)ã€‚
*   [ ] **æŽ’ç¨‹ç³»çµ±**: æ¯æ—¥è‡ªå‹•çµç®—æ¯”è³½ã€æ›´æ–°çƒå“¡å¹´é½¡/åˆç´„å¤©æ•¸ã€‚

### Phase 3: ç¶“æ¿Ÿèˆ‡äº¤æ˜“ (Economy) - [é è¨ˆ 4 é€±]
*   [ ] **äº¤æ˜“ç³»çµ±**: å¯¦ä½œæŽ›å–®ä»‹é¢èˆ‡æ¢ä»¶åŒ¹é…æ¼”ç®—æ³•ã€‚
*   [ ] **è‡ªç”±å¸‚å ´**: å¯¦ä½œç«¶æ¨™ç³»çµ±èˆ‡ RFA (å—é™è‡ªç”±çƒå“¡) æ©Ÿåˆ¶ã€‚
*   [ ] **ä»‹é¢å„ªåŒ–**: å®Œå–„å‰ç«¯é¡¯ç¤ºèˆ‡æ“ä½œé«”é©—ã€‚

---

## ðŸ›  æŠ€è¡“æž¶æ§‹ (Tech Stack)

*   **Backend**: Python 3.13 (Flask)
*   **Database**: MySQL 9.0
*   **Data Analysis**: Polars, Pandas, Apache Parquet
*   **Frontend**: HTML5, CSS3, Jinja2 Templates
*   **ORM**: SQLAlchemy

## ðŸ“‚ ç›®éŒ„çµæ§‹ (Directory Structure)

ASBL-Basketball-Manager/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ __init__.py          # App Factory
â”‚   â”œâ”€â”€ models/              # SQLAlchemy Models
â”‚   â”œâ”€â”€ routes/              # Blueprints
â”‚   â”œâ”€â”€ services/            # Business Logic (Engine, Contract...)
â”‚   â”œâ”€â”€ utils/               # Utilities (ConfigLoader...)
â”‚   â””â”€â”€ templates/           # Jinja2 HTML
â”œâ”€â”€ config/
â”‚   â””â”€â”€ game_config.yaml     # Centralized Game Configuration
â”œâ”€â”€ docs/                    # Documentation & Reports
â”‚   â”œâ”€â”€ DEV_JOURNAL_BigData_Architecture.md
â”‚   â””â”€â”€ KPI_Validation_Report_v2_6.md
â”œâ”€â”€ scripts/                 # Automation Scripts
â”‚   â”œâ”€â”€ init_db.py           # Initialize Database
â”‚   â”œâ”€â”€ simulate_match.py    # Match Simulation Engine (v1.4)
â”‚   â””â”€â”€ terminal.py          # Terminal Utils
â”œâ”€â”€ tests/                   # Testing Suite
â”‚   â””â”€â”€ big_data/            # [NEW] Big Data Verification ETL
â”‚       â”œâ”€â”€ verify_generator_integration.py # ETL Pipeline
â”‚       â”œâ”€â”€ verify_kpi_v2_6.py              # KPI Analyzer (Polars)
â”‚       â”œâ”€â”€ test_config.yaml                # Test Configuration
â”‚       â””â”€â”€ output/                         # Parquet Files (Ignored by Git)
â”œâ”€â”€ ASBL_Spec_v1.4.md        # Match Engine Specification
â”œâ”€â”€ ASBL_Player_System_Specification.md # Player System Spec (v2.6)
â”œâ”€â”€ config.py                # App Configuration
â””â”€â”€ run.py                   # Entry Point